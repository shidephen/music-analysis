<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>BeatRoot</title>
    <meta name="keywords" content="at.ofai.music.beatroot.BeatRoot,BeatRoot class" />
    <meta name="generator" content="SinjDoc 0.5" />
    <link href="../../../../stylesheet.css" rel="stylesheet" type="text/css" />
    <link rel="Index" href="../../../../index-all.html" />
    <link rel="Start" href="../../../../overview-summary.html" />
    <link rel="Up" href="package-summary.html" />
    <link rel="Help" href="../../../../help-doc.html" />
  </head>
  <body class="classPage bigframe">
   <div class="navbar">
    <p class="nav navtop">
      <span class="over"><a href="../../../../overview-summary.html">Overview</a></span>
      <span class="package"><a href="package-summary.html">Package</a></span>
      <span class="class selected">Class</span>
      <span class="use"><a href="class-use/BeatRoot.html">Use</a></span>
      <span class="tree"><a href="package-tree.html">Tree</a></span>
      <span class="deprecated"><a href="../../../../deprecated-list.html">Deprecated</a></span>
      <span class="index"><a href="../../../../index-all.html">Index</a></span>
      <span class="help"><a href="../../../../help-doc.html">Help</a></span>
    </p>
    <p class="nav navmid">
      <span class="prevnext">
       <span class="prev">Prev Class</span>
       <span class="next">Next Class</span>
      </span>
      <span class="framesel">
       <span class="frames"><a href="../../../../index.html" target="_top">Frames</a></span>
       <span class="noframes"><a href="BeatRoot.html" target="_top">NoFrames</a></span>
      </span>
      <span class="allclasses"><a href="../../../../allclasses-noframe.html">All Classes</a></span>
   </p>
   <p class="nav navbot">
      <span class="summary">Summary:
       <span class="nested">Nested</span>
       <span class="field"><a href="#field_summary">Field</a></span>
       <span class="constr"><a href="#constructor_summary">Constr</a></span>
       <span class="method"><a href="#method_summary">Method</a></span>
      </span>
      <span class="detail">Detail:
       <span class="field"><a href="#field_detail">Field</a></span>
       <span class="constr"><a href="#constructor_detail">Constr</a></span>
       <span class="method"><a href="#method_detail">Method</a></span>
      </span>
   </p>
    <div class="navtitle">
     
    </div>
    <p class="clear"><!--empty--></p>
   </div>
   <p class="packageName">at.ofai.music.beatroot</p>
   <h1>  Class  BeatRoot</h1>
<!--
   <p class="enclosing">
   Enclosing class/interface: @OUTER@
   </p>
-->


   <!-- XXX class hierarchy diagram goes here -->
<!--
   
   <p class="directSubclasses">
   Direct known subclasses: @ALL_SUBCLASSES@
   </p>
-->


   <p class="declaration">public
     class 
   <span class="className">BeatRoot</span>
   
   
      
      <span class="extends">extends Object</span>
      
      
   
   </p>

   <div class="description">
    The main class of the BeatRoot application.
  Processes the command line arguments (see processArgs()) and creates
  the three main objects:
  <UL>
  <LI><code>gui</code> - the graphical user interface object, which
  displays the audio and beat data and processes mouse and key events;</LI>
  <LI><code>audioPlayer</code> - the object which deals with audio output,
  playing the audio data with or without percussion sounds marking the beats;</LI>
  <LI><code>audioProcessor</code> - processes audio to find onsets, and calls
  the tempo induction and beat tracking methods</LI>
  </UL>
   </div>




   <table class="field_summary summary">
     <tr><th colspan="2"><a name="field_summary" id="field_summary">Field Summary</a></th></tr>

     <tr><td>protected String</td><td><span class="memberName"><a href="#argsFile" class="fieldRef">argsFile</a></span><div class="memberDescription"> Input file for batch processing where each line contains a list of arguments for a BeatRoot run</div></td></tr>



     <tr><td>protected String</td><td><span class="memberName"><a href="#audioIn" class="fieldRef">audioIn</a></span><div class="memberDescription"> File name of audio input file</div></td></tr>



     <tr><td>protected <a href="AudioPlayer.html" class="classRef">AudioPlayer</a></td><td><span class="memberName"><a href="#audioPlayer" class="fieldRef">audioPlayer</a></span><div class="memberDescription"> The object that deals with audio output</div></td></tr>



     <tr><td>protected <a href="AudioProcessor.html" class="classRef">AudioProcessor</a></td><td><span class="memberName"><a href="#audioProcessor" class="fieldRef">audioProcessor</a></span><div class="memberDescription"> The object that deals with processing the audio data</div></td></tr>



     <tr><td>protected boolean</td><td><span class="memberName"><a href="#batchMode" class="fieldRef">batchMode</a></span><div class="memberDescription"> Flag indicating that no GUI input is expected, i.e. that the program exits after processing the command line</div></td></tr>



     <tr><td>protected String</td><td><span class="memberName"><a href="#beatsFile" class="fieldRef">beatsFile</a></span><div class="memberDescription"> Input file name for annotated beat times (for evaluating BeatRoot)</div></td></tr>



     <tr><td>protected String</td><td><span class="memberName"><a href="#beatsIn" class="fieldRef">beatsIn</a></span><div class="memberDescription"> Input file name of beat times in TMF format (instead of automatic beat tracking)</div></td></tr>



     <tr><td>protected String</td><td><span class="memberName"><a href="#featureFile" class="fieldRef">featureFile</a></span><div class="memberDescription"> Input file name for (onset) feature file, instead of audio input, for ICASSP'07 paper</div></td></tr>



     <tr><td>protected <a href="Chooser.html" class="classRef">Chooser</a></td><td><span class="memberName"><a href="#fileChooser" class="fieldRef">fileChooser</a></span><div class="memberDescription"> The dialog window for selecting files for opening and saving data</div></td></tr>



     <tr><td>protected <a href="GUI.html" class="classRef">GUI</a></td><td><span class="memberName"><a href="#gui" class="fieldRef">gui</a></span><div class="memberDescription"> The graphical user interface (frame) object</div></td></tr>



     <tr><td>protected static boolean</td><td><span class="memberName"><a href="#ignoreWarnings" class="fieldRef">ignoreWarnings</a></span><div class="memberDescription"> Flag indicating whether warning messages should be ignored or displayed</div></td></tr>



     <tr><td>protected boolean</td><td><span class="memberName"><a href="#onsetOnly" class="fieldRef">onsetOnly</a></span><div class="memberDescription"> Flag to load/save onsets</div></td></tr>



     <tr><td>protected boolean</td><td><span class="memberName"><a href="#playWithBeats" class="fieldRef">playWithBeats</a></span><div class="memberDescription"> Flag indicating whether audio with beats should be played after processing is complete</div></td></tr>



     <tr><td>protected BufferedReader</td><td><span class="memberName"><a href="#reader" class="fieldRef">reader</a></span><div class="memberDescription"> For reading argsFile</div></td></tr>



     <tr><td>protected boolean</td><td><span class="memberName"><a href="#silentFlag" class="fieldRef">silentFlag</a></span><div class="memberDescription"> Flag for suppressing messages to standard output</div></td></tr>



     <tr><td>protected String</td><td><span class="memberName"><a href="#textOutputFile" class="fieldRef">textOutputFile</a></span><div class="memberDescription"> Output file name for saving the beat times in text format, one to a line</div></td></tr>



     <tr><td>protected int</td><td><span class="memberName"><a href="#useAnnotation" class="fieldRef">useAnnotation</a></span><div class="memberDescription"> For beat tracking with the first n notes given, this is the value of n.
  (e.g. n==1 determines the initial phase only; n==2 determines the initial phase and tempo)</div></td></tr>

   </table>




   <table class="constructor_summary summary">
     <tr><th colspan="2"><a name="constructor_summary" id="constructor_summary">Constructor Summary</a></th></tr>

     <tr><td> </td><td><span class="memberName"><a href="#BeatRoot(<unknown>.String[])" class="constructorRef">BeatRoot</a>(String[] args)</span><div class="memberDescription"> Constructor. </div></td></tr>

   </table>




   <table class="method_summary summary">
     <tr><th colspan="2"><a name="method_summary" id="method_summary">Method Summary</a></th></tr>

     <tr><td>static  void</td><td><span class="memberName"><a href="#error(<unknown>.String)" class="methodRef">error</a>(String message)</span><div class="memberDescription"> Print an error message and opens an exit dialog.  </div></td></tr>



     <tr><td>protected  String[]</td><td><span class="memberName"><a href="#getArgs()" class="methodRef">getArgs</a>()</span><div class="memberDescription"> Reads a line from the arguments file <code>argsFile</code>, and converts
  it into an array of Strings, allowing for quoted strings.</div></td></tr>



     <tr><td>static  void</td><td><span class="memberName"><a href="#main(<unknown>.String[])" class="methodRef">main</a>(String[] args)</span><div class="memberDescription"> Entry point for BeatRoot application.</div></td></tr>



     <tr><td>  void</td><td><span class="memberName"><a href="#processArgs(<unknown>.String[])" class="methodRef">processArgs</a>(String[] args)</span><div class="memberDescription"> Process command line arguments.
 </div></td></tr>



     <tr><td>static  void</td><td><span class="memberName"><a href="#quit()" class="methodRef">quit</a>()</span><div class="memberDescription"> Open an exit dialog.  </div></td></tr>



     <tr><td>static  String[]</td><td><span class="memberName"><a href="#stringToArgs(<unknown>.String)" class="methodRef">stringToArgs</a>(String s)</span><div class="memberDescription"></div></td></tr>



     <tr><td>static  void</td><td><span class="memberName"><a href="#warning(<unknown>.String)" class="methodRef">warning</a>(String message)</span><div class="memberDescription"> Print a warning message.
  </div></td></tr>

   </table>



<!--
   <p class="inherited">
    <span class="header">Methods inherited from class java.util.<a
   href="AbstractCollection.html">AbstractCollection</a></span>
    <a href="#addAll">addAll</a>
    <a href="#contains">contains</a>
   </p>
   <p class="inherited">
    <span class="header">Methods inherited from class java.lang.<a
   href="Object.html">Object</a></span>
    <a href="#addAll">clone</a>
    <a href="#contains">finalize</a>
   </p>
   <p class="inherited">
    <span class="header">Methods inherited from interface java.util.<a
   href="List.html">List</a></span>
    <a href="#addAll">addAll</a>
    <a href="#contains">contains</a>
   </p>
-->



   <h2><a name="field_detail" id="field_detail">Field Detail</a></h2>

   <h3><a name="argsFile" id="argsFile">argsFile</a></h3>
   <div class="memberName">protected String argsFile</div>
   <div class="memberDescription"> Input file for batch processing where each line contains a list of arguments for a BeatRoot run</div>


   <h3><a name="audioIn" id="audioIn">audioIn</a></h3>
   <div class="memberName">protected String audioIn</div>
   <div class="memberDescription"> File name of audio input file</div>


   <h3><a name="audioPlayer" id="audioPlayer">audioPlayer</a></h3>
   <div class="memberName">protected <a href="AudioPlayer.html" class="classRef">AudioPlayer</a> audioPlayer</div>
   <div class="memberDescription"> The object that deals with audio output</div>


   <h3><a name="audioProcessor" id="audioProcessor">audioProcessor</a></h3>
   <div class="memberName">protected <a href="AudioProcessor.html" class="classRef">AudioProcessor</a> audioProcessor</div>
   <div class="memberDescription"> The object that deals with processing the audio data</div>


   <h3><a name="batchMode" id="batchMode">batchMode</a></h3>
   <div class="memberName">protected boolean batchMode</div>
   <div class="memberDescription"> Flag indicating that no GUI input is expected, i.e. that the program exits after processing the command line</div>


   <h3><a name="beatsFile" id="beatsFile">beatsFile</a></h3>
   <div class="memberName">protected String beatsFile</div>
   <div class="memberDescription"> Input file name for annotated beat times (for evaluating BeatRoot)</div>


   <h3><a name="beatsIn" id="beatsIn">beatsIn</a></h3>
   <div class="memberName">protected String beatsIn</div>
   <div class="memberDescription"> Input file name of beat times in TMF format (instead of automatic beat tracking)</div>


   <h3><a name="featureFile" id="featureFile">featureFile</a></h3>
   <div class="memberName">protected String featureFile</div>
   <div class="memberDescription"> Input file name for (onset) feature file, instead of audio input, for ICASSP'07 paper</div>


   <h3><a name="fileChooser" id="fileChooser">fileChooser</a></h3>
   <div class="memberName">protected <a href="Chooser.html" class="classRef">Chooser</a> fileChooser</div>
   <div class="memberDescription"> The dialog window for selecting files for opening and saving data</div>


   <h3><a name="gui" id="gui">gui</a></h3>
   <div class="memberName">protected <a href="GUI.html" class="classRef">GUI</a> gui</div>
   <div class="memberDescription"> The graphical user interface (frame) object</div>


   <h3><a name="ignoreWarnings" id="ignoreWarnings">ignoreWarnings</a></h3>
   <div class="memberName">protected static boolean ignoreWarnings</div>
   <div class="memberDescription"> Flag indicating whether warning messages should be ignored or displayed</div>


   <h3><a name="onsetOnly" id="onsetOnly">onsetOnly</a></h3>
   <div class="memberName">protected boolean onsetOnly</div>
   <div class="memberDescription"> Flag to load/save onsets</div>


   <h3><a name="playWithBeats" id="playWithBeats">playWithBeats</a></h3>
   <div class="memberName">protected boolean playWithBeats</div>
   <div class="memberDescription"> Flag indicating whether audio with beats should be played after processing is complete</div>


   <h3><a name="reader" id="reader">reader</a></h3>
   <div class="memberName">protected BufferedReader reader</div>
   <div class="memberDescription"> For reading argsFile</div>


   <h3><a name="silentFlag" id="silentFlag">silentFlag</a></h3>
   <div class="memberName">protected boolean silentFlag</div>
   <div class="memberDescription"> Flag for suppressing messages to standard output</div>


   <h3><a name="textOutputFile" id="textOutputFile">textOutputFile</a></h3>
   <div class="memberName">protected String textOutputFile</div>
   <div class="memberDescription"> Output file name for saving the beat times in text format, one to a line</div>


   <h3><a name="useAnnotation" id="useAnnotation">useAnnotation</a></h3>
   <div class="memberName">protected int useAnnotation</div>
   <div class="memberDescription"> For beat tracking with the first n notes given, this is the value of n.
  (e.g. n==1 determines the initial phase only; n==2 determines the initial phase and tempo)</div>




   <h2><a name="constructor_detail" id="constructor_detail">Constructor Detail</a></h2>

   <h3><a name="BeatRoot(<unknown>.String[])" id="BeatRoot(<unknown>.String[])">BeatRoot</a></h3>
   <div class="memberName">public  BeatRoot(String[] args)</div>
   <div class="memberDescription"> Constructor. Initialises the BeatRoot application,
  including the GUI, and processes any command line arguments.<p class="tag tag_param"><span class="tagName">Parameters:</span> <span class="tagContents">args Optional command line arguments.</span> </p>
<p class="tag tag_see"><span class="tagName">See Also:</span> <span class="tagContents"><code><a href="BeatRoot.html">(String[])</a></code></code></span> </p>
</div>




   <h2><a name="method_detail" id="method_detail">Method Detail</a></h2>

   <h3><a name="error(<unknown>.String)" id="error(<unknown>.String)">error</a></h3>
   <div class="memberName">public static  void error(String message)</div>
   <div class="memberDescription"> Print an error message and opens an exit dialog.  Generally better than an 
  immediate exit, since the user might want to save some data before exiting.<p class="tag tag_param"><span class="tagName">Parameters:</span> <span class="tagContents">message The error message</span> </p>
</div>


   <h3><a name="getArgs()" id="getArgs()">getArgs</a></h3>
   <div class="memberName">protected  String[] getArgs()</div>
   <div class="memberDescription"> Reads a line from the arguments file <code>argsFile</code>, and converts
  it into an array of Strings, allowing for quoted strings.<p class="tag tag_return"><span class="tagName">Returns:</span> <span class="tagContents">The next line of arguments as a <code>String[]</code></span> </p>
</div>


   <h3><a name="main(<unknown>.String[])" id="main(<unknown>.String[])">main</a></h3>
   <div class="memberName">public static  void main(String[] args)</div>
   <div class="memberDescription"> Entry point for BeatRoot application.<p class="tag tag_param"><span class="tagName">Parameters:</span> <span class="tagContents">args Optional command line arguments (see constructor for details)</span> </p>
</div>


   <h3><a name="processArgs(<unknown>.String[])" id="processArgs(<unknown>.String[])">processArgs</a></h3>
   <div class="memberName">public  void processArgs(String[] args)</div>
   <div class="memberDescription"> Process command line arguments.
 Arguments are: <I>[option]* [audioFile]</I>, where
 <I>audioFile</I> is the file name of the audio input file
 containing WAV format data.
 The <I>option</I> arguments can be any of the following (in any order):<BL>
 <LI><I><B>-m</B> argsFile</I> File name of text file containing lines of arguments for batch processing</LI>
 <LI><I><B>-a</B> beatFile</I> File name of text file containing annotated beat times for evaluation</LI>
 <LI><I><B>-i</B> beatFile</I> File name of TMF file containing beat times for editing</LI>
 <LI><I><B>-b</B></I> Process in batch mode (save results and exit immediately after processing)</LI>
 <LI><I><B>-f</B> featureFile</I> Feature file on which to perform beat tracking (for ICASSP'07 paper)</LI>
 <LI><I><B>-h</B> highThreshold</I> Spectrogram energy threshold corresponding
  to maximum value in colour map</LI>
 <LI><I><B>-l</B> lowThreshold</I> Spectrogram energy threshold corresponding
  to minimum value in colour map</LI>
 <LI><I><B>-o</B> outputFile</I> Save output to this file (implies <I><B>-b</B></I>)</LI>
 <LI><I><B>-O</B> Output the times of onsets, not beats, and exit (use -o
 flag to specify the output file; implies batch mode)</LI>
 <LI><I><B>-p</B></I> Play audio with beats as soon as processing is completed</LI>
 <LI><I><B>-q</B></I> Suppress output of warnings (TODO) </LI>
 <LI><I><B>-s</B> audioScaleFactor</I> Constant for scaling amplitude envelope display</LI>
 <LI><I><B>-t</B> hopTime</I> spacing of audio frames (in seconds, default 0.01)</LI>
 <LI><I><B>-T</B> frameTime</I> size of FFT (in seconds, default 0.01161)</LI>
 <LI><I><B>-w</B></I> live input (not used)</LI>
 <LI><I><B>-c</B></I> cursor is always at centre; data scrolls past it</LI>
 <LI><I><B>-e</B> allowedError</I> allowed error in beat position for evaluation</LI>
 <LI><I><B>-E</B> allowedRelativeError</I> allowed relative error (0-1) in beat position for evaluation</LI>
 </BL></div>


   <h3><a name="quit()" id="quit()">quit</a></h3>
   <div class="memberName">public static  void quit()</div>
   <div class="memberDescription"> Open an exit dialog.  Protects against inadvertant presses of the exit button.
  Could be extended to save settings and data automatically.</div>


   <h3><a name="stringToArgs(<unknown>.String)" id="stringToArgs(<unknown>.String)">stringToArgs</a></h3>
   <div class="memberName">public static  String[] stringToArgs(String s)</div>
   <div class="memberDescription"></div>


   <h3><a name="warning(<unknown>.String)" id="warning(<unknown>.String)">warning</a></h3>
   <div class="memberName">public static  void warning(String message)</div>
   <div class="memberDescription"> Print a warning message.
  Could be extended to save warning messages to a log file.<p class="tag tag_param"><span class="tagName">Parameters:</span> <span class="tagContents">message The warning message</span> </p>
</div>

   
   <div class="navbar">
    <p class="nav navtop">
      <span class="over"><a href="../../../../overview-summary.html">Overview</a></span>
      <span class="package"><a href="package-summary.html">Package</a></span>
      <span class="class selected">Class</span>
      <span class="use"><a href="class-use/BeatRoot.html">Use</a></span>
      <span class="tree"><a href="package-tree.html">Tree</a></span>
      <span class="deprecated"><a href="../../../../deprecated-list.html">Deprecated</a></span>
      <span class="index"><a href="../../../../index-all.html">Index</a></span>
      <span class="help"><a href="../../../../help-doc.html">Help</a></span>
    </p>
    <p class="nav navmid">
      <span class="prevnext">
       <span class="prev">Prev Class</span>
       <span class="next">Next Class</span>
      </span>
      <span class="framesel">
       <span class="frames"><a href="../../../../index.html" target="_top">Frames</a></span>
       <span class="noframes"><a href="BeatRoot.html" target="_top">NoFrames</a></span>
      </span>
      <span class="allclasses"><a href="../../../../allclasses-noframe.html">All Classes</a></span>
   </p>
   <p class="nav navbot">
      <span class="summary">Summary:
       <span class="nested">Nested</span>
       <span class="field"><a href="#field_summary">Field</a></span>
       <span class="constr"><a href="#constructor_summary">Constr</a></span>
       <span class="method"><a href="#method_summary">Method</a></span>
      </span>
      <span class="detail">Detail:
       <span class="field"><a href="#field_detail">Field</a></span>
       <span class="constr"><a href="#constructor_detail">Constr</a></span>
       <span class="method"><a href="#method_detail">Method</a></span>
      </span>
   </p>
    <div class="navtitle">
     
    </div>
    <p class="clear"><!--empty--></p>
   </div>
   <div class="bottom"></div>
   </body>
</html>
